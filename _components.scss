@mixin widget() {
    /*$vertical-spacing: $internal-spacing;
    @if ($theme-widget-doubleSpacing == 1) {
      $vertical-spacing: $internal-spacing *2;
    }
    @include vertical-spacing($vertical-spacing);
  */
    .widget__title {
        font: {
            size: 87.5%;
            weight: $font-feature-weight;
        }
        letter-spacing: 0;
        margin-bottom: $internal-spacing;
    }
}


@mixin arrow($direction: 'down', $size: 1em, $color: $body-text-color) {
    border: $size solid transparent;
    display: block;
    content: "";
    width:  0;
    height: 0;
    @if $direction == 'up' {
        border-bottom-color: $color;
    } @else if $direction == 'right' {
        border-left-color: $color;
    } @else if $direction == 'down' {
        border-top-color: $color;
    } @else {
        border-right-color: $color;
    }
}



@mixin button-like($foreground: $color-primary, $background: $color-inverted, $border: 'normal') {

    &, &:visited {

        @if $border == 'no-border' {
            border-color: $background;
        }
        @else {
            border-color: $foreground;
        }
        background-color: $background;
        color: $foreground;

    }


    &:focus, &:hover {

        @if $border == 'no-border' {
            border-color: lighten($background, 15);
        }
        @else {
            border-color: lighten($foreground, 15);
        }
        background-color: lighten($background, 15);
        color: lighten($foreground, 15);
        outline: none;

    }

}

@mixin button-like-style($text-color: $color-primary, $background-color: $color-inverted, $border: 'normal') {

    &, &:visited {

        @if $border == 'no-border' {
            border-color: $background;
        }
        @else {
            border-color: $foreground;
        }
        background-color: $background;
        color: $foreground;

    }


    &:focus, &:hover {

        @if $border == 'no-border' {
            border-color: lighten($background, 15);
        }
        @else {
            border-color: lighten($foreground, 15);
        }
        background-color: lighten($background, 15);
        color: lighten($foreground, 15);
        outline: none;

    }

    @content;

}

.widget {
    @include widget;
}





/*---------------------------*\
   #NAVIGATION
\*---------------------------*/

.nav {
    @include reset-spacing();
    margin-left: 0.7ex;
}

    .nav__item {
        @include inline-block-box();
        margin-left: -0.7ex;
        list-style: none;
        position: relative;
    }

        .nav__caption {
            @include inline-block-box();
            cursor: pointer;
            text-decoration: none;
        }

        [aria-haspopup="true"] {

            .nav__caption::after {
                @include arrow('down', .4em, $color-primary);
                position: absolute;
                right: .3em;
                top:   45%;
            }

            .nav__caption:focus::after, .nav__caption:hover::after {
                @include arrow('down', .4em, $color-highlight);
            }

        }

    .nav__current {

        .nav__caption,
        .nav__caption:focus, .nav__caption:hover {
            cursor: default;
        }

    }


.main-nav {

    .nav__caption {
        font-weight: 600;
        padding: 1.5em;
    }

    .nav__current {

        .nav__caption {
            border-bottom: 5px solid $color-primary;
            color: $color-primary;
        }

    }

}


.nav-tab {
    margin: 0 0 $internal-spacing*3;
}

    .tab__caption {
        @include small-uppercase-title($font-heading-weight);
        color: $color-label;
        padding: .3em 1em;
    }

    .nav__current {

        .tab__caption {
            color: $color-highlight;
        }

    }

    .tab__item {
        border-left: $border-default-setting;
    }

    .tab__item:first-child {
        border: none;
    }





/*---------------------------*\
   #BREADCRUMB
\*---------------------------*/

    .breadcrumb__item {
        @include solid-box(.7em .5em .7em 0);
        font-size: 81.25%;
    }

        .breadcrumb__item::after {
            content: '/';
            font-weight: 700;
            float: right;
            margin-left: .7em;
            margin-top:  .1em;
        }

    .breadcrumb__item {
        color: $color-label;
    }

    .breadcrumb__item.nav__current::after {
        display: none;
    }

    .breadcrumb__root::before {
        content: "\f015";
        font-family: FontAwesome, sans-serif;
        color: $color-primary;
    }

.nav-root {
    /*
    content: ">>";
    float: left;
    margin-right: $internal-spacing/2;
      */
}


// Vertical navigation

.toolbar {
    @include inline-block-box();

    .separator {
        border-left: $border-default-setting;
        margin-right: .7ex;
    }

}





/*---------------------------*\
   #LISTS
\*---------------------------*/

.def-list, .icon-list, .tab-list, .date-list {
    @include reset-spacing();
    list-style-type: none;
}

.list__item, .def-list__item,
.media-item, .media__content {
    @include clear-block;
}

    .media__subject, .def__title {
        float: left;
        margin-right: $internal-spacing;
    }

    .def-list__item {
        margin-bottom: $internal-spacing/2;
    }

        .def__title {
            margin-right: $internal-spacing;
            text-align: right;
            min-width: 40%;
        }

        .def__description {
            @include clear-block;
            font-size: 92%;
        }


//TODO move to the 'base' section
.button {

    @include inline-block-box();
    @include button-like($color-primary, $color-inverted);
    border: 1px solid;
    font: {
        weight: 600;
        size: 87.5%;
    };
    line-height: 1;
    padding: .65em .8em;
    text-decoration: none;
    text-align: center;

}

    .button--success {
        @include button-like($color-success);
    }

    .button--error {
        @include button-like($color-error);
    }

    .button--warning {
        @include button-like($color-warning);
    }

    .button--neutral {
        @include button-like($color-label);
    }

    .button--inverted {
        @include button-like($color-inverted, $color-primary, 'no-border');

        &.button--success {
            @include button-like($color-inverted, $color-success, 'no-border');
        }

        &.button--error {
            @include button-like($color-inverted, $color-error, 'no-border');
        }

        &.button--warning {
            @include button-like($color-inverted, $color-warning, 'no-border');
        }

        &.button--neutral {
            @include button-like($color-inverted, $color-label, 'no-border');
        }

    }

    .button--block {
        display: block;
    }

    .button--transparent {
        &, &:hover, &:focus {
            background-color:   transparent;
        }
    }

    .button--borderless {
        &, &:hover, &:focus {
            border-color:       transparent;
        }
    }

    /*
    .button:hover, button:hover, .button, button {
        transition: all 100ms linear;
    }
    */

hr {
    height: 0;
    border: none;
    border-top: $border-default-setting;
}


form {

}


/* #TABLE */
.table {

}




/* #Calendar Components */


.calendar {

    &__month-name {
        line-height: 2;
        @include small-uppercase-title($font-heading-weight);
        font-size: 100%;
    }

    &__week-day {
        width: percentage(1/70);
        @include small-uppercase-title();
        padding: 1em 0;
    }

    &__day, &__day > .caption, &__week-day > .caption { text-align: center; }

    &__day > .caption, &__week-day > .caption {
        display: block;
        padding-bottom: .7em;
        padding-top:    .7em;
    }

}


/*TODO reposition this selector */
.date-list .media-item {
    margin-bottom: $internal-spacing/2;
}


.calendar-like {

}


.calendar-like {

    background: lighten($color-neutral, 15);
    color: $body-text-color;
    text-align: center;

    &__day,
    &__month {
        padding: $internal-spacing/4 $internal-spacing/2;
    }

    &__day {
        background: $color-label;
        color: $color-inverted;
        font-size: 125%;
    }

    &__month {
        @include small-uppercase-title();
    }

}
